<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Debug Cart - localStorage Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h2 {
            color: #7851A9;
            margin-top: 0;
        }
        button {
            background: #7851A9;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #a583c7;
        }
        pre {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            overflow: auto;
        }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
    </style>
</head>
<body>
    <h1>üîç Cart Debug Tool</h1>
    
    <div class="card">
        <h2>LocalStorage Keys</h2>
        <div id="keys"></div>
        <button onclick="checkKeys()">üîÑ Refresh Keys</button>
    </div>

    <div class="card">
        <h2>Cart Data ('cart' key)</h2>
        <div id="cartData"></div>
        <button onclick="checkCart()">üîÑ Check Cart</button>
    </div>

    <div class="card">
        <h2>ShoppingCart Data ('shoppingCart' key)</h2>
        <div id="shoppingCartData"></div>
        <button onclick="checkShoppingCart()">üîÑ Check ShoppingCart</button>
    </div>

    <div class="card">
        <h2>Actions</h2>
        <button onclick="clearAll()">üóëÔ∏è Clear All localStorage</button>
        <button onclick="addTestProduct()">‚ûï Add Test Product to 'cart'</button>
        <button onclick="location.href='/'">üè† Go Home</button>
        <button onclick="location.href='/checkout'">üí≥ Go to Checkout</button>
    </div>

    <script>
        function checkKeys() {
            const keys = Object.keys(localStorage);
            const div = document.getElementById('keys');
            if (keys.length === 0) {
                div.innerHTML = '<p class="warning">‚ö†Ô∏è No keys found in localStorage</p>';
            } else {
                div.innerHTML = '<p class="success">‚úÖ Found ' + keys.length + ' key(s):</p><pre>' + JSON.stringify(keys, null, 2) + '</pre>';
            }
        }

        function checkCart() {
            const div = document.getElementById('cartData');
            const cart = localStorage.getItem('cart');
            
            if (!cart) {
                div.innerHTML = '<p class="warning">‚ö†Ô∏è No cart data found in localStorage with key "cart"</p>';
            } else {
                try {
                    const parsed = JSON.parse(cart);
                    const count = Array.isArray(parsed) ? parsed.length : 0;
                    div.innerHTML = '<p class="success">‚úÖ Found cart data (' + count + ' items):</p><pre>' + JSON.stringify(parsed, null, 2) + '</pre>';
                } catch (e) {
                    div.innerHTML = '<p class="error">‚ùå Error parsing cart data: ' + e.message + '</p><pre>' + cart + '</pre>';
                }
            }
        }

        function checkShoppingCart() {
            const div = document.getElementById('shoppingCartData');
            const cart = localStorage.getItem('shoppingCart');
            
            if (!cart) {
                div.innerHTML = '<p class="warning">‚ö†Ô∏è No cart data found in localStorage with key "shoppingCart"</p>';
            } else {
                try {
                    const parsed = JSON.parse(cart);
                    const count = Array.isArray(parsed) ? parsed.length : 0;
                    div.innerHTML = '<p class="success">‚úÖ Found shoppingCart data (' + count + ' items):</p><pre>' + JSON.stringify(parsed, null, 2) + '</pre>';
                } catch (e) {
                    div.innerHTML = '<p class="error">‚ùå Error parsing shoppingCart data: ' + e.message + '</p><pre>' + cart + '</pre>';
                }
            }
        }

        function clearAll() {
            if (confirm('Are you sure you want to clear all localStorage?')) {
                localStorage.clear();
                alert('‚úÖ localStorage cleared!');
                checkKeys();
                checkCart();
                checkShoppingCart();
            }
        }

        function addTestProduct() {
            const testCart = [
                {
                    id: 1,
                    name: "Test Product 1",
                    price: 100000,
                    quantity: 2,
                    image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500"
                },
                {
                    id: 2,
                    name: "Test Product 2", 
                    price: 200000,
                    quantity: 1,
                    image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500"
                }
            ];
            
            localStorage.setItem('cart', JSON.stringify(testCart));
            alert('‚úÖ Test products added to cart!');
            checkCart();
        }

        // Auto-run on load
        window.onload = function() {
            checkKeys();
            checkCart();
            checkShoppingCart();
        };
    </script>
</body>
</html>
